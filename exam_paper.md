# HarmonyOS MCP 查询助手开发考试

---

## 工程初始化

### 资源包说明

资源包涵盖：

1. **query-config.json** - 查询配置文件
2. **ApiTypes.ets** - 类型定义文件（供参考）
3. **exampleReturn.md** - Agent HTTP API 返回结果示例（供参考）

### 初始化步骤

初始化工程时，将 query-config.json 放置在 rawfile 目录下。

---

## 应用功能开发（总计60分）

### 1. 本地文件读取逻辑实现（6分）

在 pages/Index 页面中实现读取 rawfile 目录下的 query-config.json 文件逻辑，并解析为实体对象，从对象中读取 queryOptions 用于后续查询功能列表的渲染；实现页面标题（高德MCP查询助手）的渲染。

#### 答题卡提交要求
1. 请将读取 json 文件的代码截图、渲染标题的代码截图粘贴到答题卡中
2. 请将模拟器中标题的渲染页面截图粘贴到答题卡中

---

### 2. 实现列表卡片组件（5分）

封装可复用的卡片组件，列表中每一项的卡片应该包含 "icon"、"label"、"description" 内容的显示；每一项是 radio 单选按钮。

#### 答题卡提交要求
1. 请将代码实现截图粘贴到答题卡中
2. 请将组件渲染效果截图粘贴到答题卡中

---

### 3. 实现查询列表渲染（5分）

在 Index 页面中引用卡片组件，并用第一步获取的 queryOptions 数据来渲染查询功能选择列表界面。

#### 答题卡提交要求
1. 请将代码实现截图粘贴到答题卡中
2. 查询列表渲染效果截图粘贴到答题卡中

---

### 4. 实现表单项组件（5分）

观察 queryOptions 里面的 fields 字段，该字段描述了查询选项选中后需要输入的信息。其中 required 为是否必填；type 是表单类型，本项目中仅涉及文本输入框。这一步实现表单项组件，接收单个 field 信息，并渲染出表单内容，包含 label、placeholder 的显示。

#### 答题卡提交要求
1. 请将代码实现截图粘贴到答题卡中
2. 请将表单项组件渲染效果截图粘贴到答题卡中

---

### 5. 实现联动逻辑（7分）

选择不同的查询功能项后，动态展示对应的表单输入框，实现选项与表单内容的联动效果。

#### 实现要点提示
1. 监听查询选项变化，当选择改变时触发表单更新
2. 根据选中项的 fields 配置动态渲染对应表单
3. 切换选项时清空之前输入的数据，避免数据污染

#### 答题卡提交要求
1. 请将上述每个要点的实现代码截图分步粘贴到答题卡中
2. 请将选中查询天气的页面渲染效果截图粘贴到答题卡中
3. 请将选中骑行规划的页面渲染效果截图粘贴到答题卡中

---

### 6. 实现路由跳转（3分）

新建结果页面并配置路由，实现查询按钮点击跳转到结果页。

#### 实现要点提示
1. 创建 ResultPage.ets 页面文件，实现标题以及左上角返回逻辑
2. 在 main_pages.json 中添加路由配置
3. 实现查询按钮点击事件处理

#### 答题卡提交要求
1. 请将 ResultPage.ets 页面创建代码截图粘贴到答题卡中
2. 请将 main_pages.json 路由配置截图粘贴到答题卡中
3. 请将查询按钮点击事件和路由跳转代码截图粘贴到答题卡中

---

### 7. 实现跳转时同时添加参数（2分）

跳转结果页时，将当前的查询类型、用户输入信息以及要查询的内容文本作为参数传递到结果页。

#### 各种查询类型的参数示例

- **查询天气**：queryType: 'weather', queryText: "查天气 - 城市名称: 杭州"
- **查询POI**：queryType: 'poi', queryText: "查询POI - 地址信息: 西湖区文三路"
- **周边搜索**：queryType: 'nearby', queryText: "周边搜索 - 位置: 西湖, 搜索关键词: 餐厅"
- **距离测量**：queryType: 'distance', queryText: "距离测量 - 起点: 杭州, 终点: 上海"
- **骑行规划**：queryType: 'cycling', queryText: "骑行规划 - 出发地: 西湖, 目的地: 雷峰塔"

#### 实现要点提示
1. 点击查询按钮前实现表单验证逻辑，检查必填项是否已填写
2. 根据当前表单内容构建出 queryText（查询内容）

#### 答题卡提交要求
1. 请将表单验证逻辑代码截图粘贴到答题卡中
2. 请将构建 queryText 的方法实现代码截图粘贴到答题卡中

---

### 8. 实现结果页参数解析及查询信息展示（3分）

在结果页面中获取路由参数，在页面顶部中展示出【查询类型】【查询内容】两个信息。

#### 实现要点提示
1. 获取路由参数，解析查询类型和查询内容数据
2. 设计合理的信息展示UI界面

#### 答题卡提交要求
1. 请将路由参数获取和解析代码截图粘贴到答题卡中
2. 请将查询信息展示的UI代码截图粘贴到答题卡中
3. 请将结果页面展示查询信息的效果截图粘贴到答题卡中

---

### 9. 实现请求逻辑（5分）

在结果页面显示后调用 API 查询结果（华为云部署的MCP API），实现 HTTP 网络请求逻辑。

#### 实现要点提示
1. 根据 API 的要求设置你的 http 请求头
2. 考虑请求出错的情况，请求结束要及时销毁 http 实例
3. http 请求调用的时机要在正确的生命周期函数中执行

#### 答题卡提交要求
1. 请将 http 请求代码截图粘贴到答题卡中

---

### 10. 解析请求响应数据，展示最终message返回结果（5分）

解析 HTTP 请求 API 返回的 SSE 数据流，提取并展示出最终的响应内容。

#### 实现要点提示
1. 你可以利用 curl 命令尝试发起一个真实的 post 请求，观察返回结果。资源包中的 exampleReturn.md 记录了一个真实请求结果供你参考。通过观察可以得出，响应是以数据片段返回的，每一小段都是 `data：` 开头，接下来的是 json 字符串
2. 这一步先关注 type 为 message 的片段， 片段里的 data.content 就是结果数据的一个内容片段
3. 把这些 message 片段拼接为一个整体，在结果页展示即可

#### 答题卡提交要求
1. 请将message数据解析代码截图粘贴到答题卡中
2. 请将message展示UI代码截图粘贴到答题卡中
3. 请将message内容展示效果截图粘贴到答题卡中

---

### 11. 实现不同状态展示（5分）

根据请求状态展示不同的UI界面：请求执行中展示 loading 态；请求失败展示失败状态和重新查询按钮；请求成功展示请求结果。

#### 实现要点提示
1. 定义请求状态管理（loading、success、error）
2. 使用条件渲染展示不同状态下的 UI
3. 错误状态显示错误信息和重试按钮

#### 答题卡提交要求
1. 请将状态管理定义以及更新状态的代码截图粘贴到答题卡中
2. 请将 Loading 状态UI实现代码截图粘贴到答题卡中
3. 请将错误状态UI和重试逻辑代码截图粘贴到答题卡中
4. 请将根据不同状态渲染不同结果UI的代码逻辑截图粘贴到答题卡中
5. 请将 Loading 状态页面效果截图粘贴到答题卡中
6. 请将错误状态页面效果截图粘贴到答题卡中

---

### 12. 解析请求响应数据，展示工具调用情况（5分）

解析并展示 API 响应中的工具调用信息，包括调用的工具名称、参数、执行状态、返回结果等详细信息。

#### 实现要点提示
1. 关注响应中 type 为 tool 的片段，其中 request 为工具调用参数，response 为工具调用的结果，status是执行状态
2. 单次查询也可能调用多个工具，在页面展示工具调用情况（涵盖工具名称、执行状态即可）

#### 答题卡提交要求
1. 请将工具片段的数据解析代码截图粘贴到答题卡中
2. 请将工具调用信息UI设计代码截图粘贴到答题卡中
3. 请将工具调用展示效果截图粘贴到答题卡中

