## 工程初始化

资源包涵盖：

（1）query-option.json

（2）ApiTypes.ets （类型定义，供参考）

（3）exampleReturn.md (agent HTTP API 返回结果示例，供参考)

初始化工程时，将 query-option.json 放置在 rawfile 目录下；

## 应用功能开发（总计60分）

### 1. 本地文件读取逻辑实现（6分）

在 page/Index 页面中实现读取 rawfile 目录下的 query-config.json 文件逻辑，并解析为实体对象，从对象中读取 queryOptions 用于后续查询功能列表的渲染；实现页面标题（高德MCP查询助手）的渲染。

答题卡提交：  
（1）请将读取 json 文件的代码截图、渲染标题的代码截图粘贴到答题卡中  
（2）请将模拟器中标题的渲染页面截图粘贴到答题卡中



---

#### 【参考答案】
（1）请将读取 json 文件的代码截图、渲染标题的代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757837663039-e4798df2-e0a1-4e57-9e71-e3ce7840050e.png)

标题渲染

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757837852845-232057d8-d489-481e-b23f-4469785f6b59.png)



评分标准：

1. 在正确的生命周期 aboutToAppear 调用读文件方法
2. 正确获取 context 并且有调用 getRawFileContext 方法
3. 使用 utf-8 解码文本数据
4. 使用 JSON.parse 转成对象



---

  
（2）请将模拟器中标题的渲染页面截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757838094214-bbbd5120-93e2-41a5-b8a5-818d0f3105ec.png)



评分标准：

1. 展示出标题即得分

---

### 2. 实现列表卡片组件（5分）
封装可复用的卡片组件，列表中每一项的卡片应该包含 "icon"、"label"、"description" 内容的显示；每一项是 radio 单选按钮。

答题卡提交：  
（1）请将代码实现截图粘贴到答题卡中  
（2）请将组件渲染效果截图粘贴到答题卡中

---

#### <font style="color:rgb(38, 38, 38);">【参考答案】</font>
（1）请将代码实现截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757838294928-e11b9d59-be4a-4191-bded-73babf23478e.png)

评分标准：

1. 使用 radio 展示单选按钮
2. 展示出 icon、label、description 字段
3. 右侧使用 Column 布局
4. 组件使用 @Builder 或者 @Component 实现都给分

 

---

  
（2）请将组件渲染效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757838443268-d5727e83-8b71-4985-a928-21e0c4fc8fef.png)



### 3. 实现查询列表渲染（5分）
在 Index 页面中引用卡片组件，并用第一步获取的 queryOptions 数据来渲染查询功能选择列表界面。

答题卡提交：  
（1）请将代码实现截图粘贴到答题卡中  
（2）查询列表渲染效果截图粘贴到答题卡中

---

<font style="color:rgb(38, 38, 38);"></font>

#### <font style="color:rgb(38, 38, 38);">  
</font><font style="color:rgb(38, 38, 38);">【参考答案】</font>
（1）请将代码实现截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757838983101-7e606528-3421-4dc4-ac07-20d5a608f77e.png)

评分标准：

1. 使用 ForEach 渲染列表
2. 正确传参



  
（2）查询列表渲染效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839067151-83d68d4b-5a31-434b-a7bb-856183078a6d.png)

### 4. 实现表单项组件（5分）
观察 queryOptions 里面的 fields 字段，该字段描述了查询选项选中后需要输入的信息。其中 required 为是否必填；type 是表单类型，本项目中仅涉及文本输入框。这一步实现表单项组件，接收单个 field 信息，并渲染出表单内容，包含 label、placeholder 的显示。



答题卡提交：  
（1）请将代码实现截图粘贴到答题卡中

（2）请将表单项组件渲染效果截图粘贴到答题卡中



---

#### <font style="color:rgb(38, 38, 38);">  
</font><font style="color:rgb(38, 38, 38);">【参考答案】</font>
（1）请将代码实现截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839203977-8ce41caa-39db-4c23-8753-6b3d262c4549.png)



评分标准：

1. 渲染出 label
2. 渲染出 required 必填信息
3. 正确使用 TextInput 并传入 placeholder

---

（2）请将表单项组件渲染效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839420644-4de6d72f-7be5-4014-96b9-5b6de41b20a1.png)



### 5. 实现联动逻辑（7分）
选择不同的查询功能项后，动态展示对应的表单输入框，实现选项与表单内容的联动效果。  
实现要点提示：  
（1）监听查询选项变化，当选择改变时触发表单更新  
（2）根据选中项的 fields 配置动态渲染对应表单  
（3）切换选项时清空之前输入的数据，避免数据污染

答题卡提交：  
（1）请将上述每个要点的实现代码截图分步粘贴到答题卡中  
（2）请将选中查询天气的页面渲染效果截图粘贴到答题卡中  
（3）请将选中骑行规划的页面渲染效果截图粘贴到答题卡中

---

#### <font style="color:rgb(38, 38, 38);">  
</font><font style="color:rgb(38, 38, 38);">【参考答案】</font>
（1）请将上述每个要点的实现代码截图分步粘贴到答题卡中



监听查询选项变化，当选择改变时触发表单更新

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839578745-eed1a9d0-28ca-40c9-9825-ff529f132940.png)



根据选中项的 fields 配置动态渲染对应表单

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839678847-ce8483af-b2c3-45ef-9eae-7eb35107307b.png)



清空表单

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757839801343-e700ec26-b576-48e7-bbc3-a68a5041b28d.png)



评分标准：

1.  Radio 组件绑定 onChange，将当前选项写入 状态变量
2. 根据选中的选项来渲染表单区域，有绑定了 selectedOption
3. 渲染表单项时使用 ForEach 

  
（2）请将选中查询天气的页面渲染效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840113318-d0aa179e-a31f-4593-b532-c7cb8c297c2b.png)



评分标准：

1. 展示出城市名称和 placeholder 信息

---

  
（3）请将选中骑行规划的页面渲染效果截图粘贴到答题卡中



![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840141552-09d8a0ba-761f-42e1-ae8f-2e94c82c24d6.png)

评分标准：

1. 展示出发地和目的地两个表单项



---

### 6. 实现路由跳转（3分）
新建结果页面并配置路由，实现查询按钮点击跳转到结果页。

实现要点提示：  
（1）创建 ResultPage.ets 页面文件，实现标题以及左上角返回逻辑  
（2）在 main_pages.json 中添加路由配置  
（3）实现查询按钮点击事件处理

答题卡提交：  
（1）请将 ResultPage.ets 页面创建代码截图粘贴到答题卡中  
（2）请将 main_pages.json 路由配置截图粘贴到答题卡中  
（3）请将查询按钮点击事件和路由跳转代码截图粘贴到答题卡中

#### 【参考答案】
（1）请将 ResultPage.ets 页面创建代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840370004-ccc15252-bcd6-4463-a936-1cde346995a8.png)

  
（2）请将 main_pages.json 路由配置截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840496101-18e33c68-e9ba-4682-a5f0-e88493c69786.png)

  
（3）请将查询按钮点击事件和路由跳转代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840580891-7a3a6acd-6250-426f-bc2b-77c0cd61dc70.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840558175-602bebb3-7a42-4483-a70b-7faf408ab33c.png)



评分标准：

1. 正确配置main_pages.json
2. 实现 router.push
3. 实现 router.back 返回逻辑

---

### 7. 实现跳转时同时添加参数（2分）
跳转结果页时，将当前的查询类型、用户输入信息以及要查询的内容文本作为参数传递到结果页。

各种查询类型的参数示例：

+ **查询天气**：queryType: 'weather', queryText: "查天气 - 城市名称: 杭州"
+ **查询POI**：queryType: 'poi', queryText: "查询POI - 地址信息: 西湖区文三路"
+ **周边搜索**：queryType: 'nearby', queryText: "周边搜索 - 位置: 西湖, 搜索关键词: 餐厅"
+ **距离测量**：queryType: 'distance', queryText: "距离测量 - 起点: 杭州, 终点: 上海"
+ **骑行规划**：queryType: 'cycling', queryText: "骑行规划 - 出发地: 西湖, 目的地: 雷峰塔"

实现要点提示：  
（1）点击查询按钮前实现表单验证逻辑，检查必填项是否已填写  
（2）根据当前表单内容构建出 queryText （查询内容）

答题卡提交：  
（1）请将表单验证逻辑代码截图粘贴到答题卡中  
（2）请将构建 queryText 的方法实现代码截图粘贴到答题卡中



#### 【参考答案】
（1）请将表单验证逻辑代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840783053-b4de9969-055e-497d-92eb-f9a08d1b8c29.png)

  
（2）请将构建 queryText 的方法实现代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757840814688-6cc8f7fe-e991-4fb2-a78b-6a598db1bbf3.png)



评分标准：

1. 表单验证
    1. 判断 required 字段
    2. 在跳转之前有 return 
2. 构建queryText
    1. 有从 formData 读数据
    2. 使用 map 或者 forEach 循环拼接的逻辑

### 8. 实现结果页参数解析及查询信息展示（3分）
在结果页面中获取路由参数，在页面顶部中展示出【查询类型】【查询内容】两个信息。

实现要点提示：  
（1）获取路由参数，解析查询类型和查询内容数据  
（2）设计合理的信息展示UI界面

答题卡提交：  
（1）请将路由参数获取和解析代码截图粘贴到答题卡中

（2）请将查询信息展示的UI代码截图粘贴到答题卡中  
（3）请将结果页面展示查询信息的效果截图粘贴到答题卡中

---

#### 【参考答案】
（1）请将路由参数获取和解析代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757841060471-f8422b46-6940-478d-ab2c-2d9ebcc40499.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757841080821-0cad4149-dfd6-4295-9400-68b49b1f1f24.png)

（2）请将查询信息展示的UI代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757841337746-07e443ec-20f7-4a15-a1cf-b8482918af1c.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757841318686-68904b15-0009-40e3-afff-6b1ea7c68b33.png)  
（3）请将结果页面展示查询信息的效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757841128699-ba1f89d4-50cc-43de-9a21-7e2aee100223.png)



评分标准：

1. 在 aboutToAppear 中解析得 1 分
2. 使用 router.getParams 得 1 分
3. 查询类型根据 type 正确映射中文得 1 分



### 9. 实现请求逻辑（5分）
在结果页面显示后调用 API 查询结果（华为云部署的MCP API），实现 HTTP 网络请求逻辑。

实现要点提示：  
（1）根据 API 的要求设置你的 http 请求头  
（2）考虑请求出错的情况，请求结束要及时销毁 http 实例

（3）http 请求调用的时机要在正确的生命周期函里执行



答题卡提交：  
（1）请将 http 请求代码截图粘贴到答题卡中，体现

---

#### 【参考答案】
1. http请求逻辑

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757831534979-daef016d-46bb-4753-ae86-4dc3686fd2b9.png)



2. 考虑容错情况
3. 请求结束销毁 http 实例

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757832178697-9c4af4e7-0c08-42fc-a73b-98e479069e26.png)



4. 在页面合适的时机请求

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757832635757-8d1e7732-f09d-4940-be01-d48bfc22916e.png)



【评分标准】

1. http 请求调用正确
2. header 设置正确
3. 使用 try catch 考虑容错
4. 请求结束考虑销毁实例
5. 在 onPageShow 时机调用请求



### 10. 解析请求响应数据，展示最终message返回结果（5分）
解析 HTTP 请求 API 返回的 SSE 数据流，提取并展示出最终的响应内容。

实现要点提示：  
（1）你可以利用 curl 命令尝试发起一个真实的 post 请求，观察返回结果。资源包中的 exampleReturn.md 记录了一个真实请求结果供你参考。通过观察可以得出，响应是以数据片段返回的，每一小段都是 `data：` 开头，接下来的是 json 字符串；  
（2）这一步先关注 type 为 message 的片段， 片段里的 data.content 就是结果数据的一个内容片段  
（3）把这些 message 片段拼接为一个整体，在结果页展示即可



答题卡提交：  
（1）请将message数据解析代码截图粘贴到答题卡中  
（2）请将message展示UI代码截图粘贴到答题卡中  
（3）请将message内容展示效果截图粘贴到答题卡中



#### 【参考答案】
1. message 解析

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757833794639-820abb4d-8a8b-45a0-a322-2b311430fa4c.png)



评分标准：

1. 按换行切分 responseText 片段
2. for 循环遍历
3. 获取 `data:`之后的 json 串
4. 提取 data.content 整合最终的 message



（2）message UI展示代码

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757834160712-870e2c09-4d32-4b1e-9a04-2cfb498feb75.png)

评分标准：

1. 能正确引用变量即可



（3）页面效果截图

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757834259207-7eae2dd5-3323-470a-9dae-9725ee316850.png)



### 11. 实现不同状态展示（5分）
根据请求状态展示不同的UI界面：请求执行中展示 loading 态；请求失败展示失败状态和重新查询按钮；请求成功展示请求结果。

实现要点提示：  
（1）定义请求状态管理（loading、success、error）  
（2）使用条件渲染展示不同状态下的 UI  
（4）错误状态显示错误信息和重试按钮  


答题卡提交：  
（1）请将状态管理定义以及更新状态的代码截图粘贴到答题卡中  
（2）请将 Loading 状态UI实现代码截图粘贴到答题卡中  
（3）请将错误状态UI和重试逻辑代码截图粘贴到答题卡中

（4）请将根据不同状态渲染不同结果UI的代码逻辑截图粘贴到答题卡中  
（5）请将 Loading 状态页面效果截图粘贴到答题卡中  
（6）请将错误状态页面效果截图粘贴到答题卡中



#### 【参考答案】
（1）状态管理定义以及更新状态的代码截图

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757834824366-9a34683b-d235-4858-8ae8-4fa6433931fb.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757834888169-3d425559-7e30-477d-b062-596b917ea345.png)



评分标准：

1. 使用 @State 定义了  loading 和 error 状态，loading 初始化为 true
2. 请求完成更新 loading
3. 请求失败写入 error



（2）请将 Loading 状态UI实现代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757835288393-b954be30-c5ea-4554-a597-48775d0bcc19.png)

  
（3）请将错误状态UI和重试逻辑代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757835359713-b9eb9896-1e07-49f0-b4a5-1bf9099b5043.png)

评分标准：

1. 展示 错误信息
2. 有重新查询按钮
3. 按钮实现包含清空 error 以及重新请求逻辑



（4）请将根据不同状态渲染不同结果UI的代码逻辑截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757835462850-e97a7da8-c57f-4603-b430-b62bc1c6888d.png)

评分标准：

1. 使用 if else 判断状态即得分

---

  
（5）请将 Loading 状态页面效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757835583561-fb134b6d-95f0-4a33-bf7d-2cfc09d4e336.png)

评分标准：

1. 代码写对了，有图就得分



---

  
（6）请将错误状态页面效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757835749039-4748779b-a7a8-492f-80d8-400f4c532290.png)

评分标准：

1. 代码写对了，有图就得分



---



### 12. 解析请求响应数据，展示工具调用情况（5分）
解析并展示 API 响应中的工具调用信息，包括调用的工具名称、参数、执行状态、返回结果等详细信息。

实现要点提示：  
（1）关注响应中 type 为 tool 的片段，其中 request 为工具调用参数，response 为工具调用的结果，status是执行状态  
（2）单次查询也可能调用多个工具，在页面展示工具调用情况（涵盖工具名称、执行状态即可）  


答题卡提交：  
（1）请将工具片段的数据解析代码截图粘贴到答题卡中  
（2）请将工具调用信息UI设计代码截图粘贴到答题卡中  
（3）请将工具调用展示效果截图粘贴到答题卡中



#### 【参考答案】
（1）请将工具片段的数据解析代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757836255361-2ba70401-3826-428b-bb36-b63f51362960.png)

评分标准：

1. 处理了 type 为 tool 的片段即得分

---

  
（2）请将工具调用信息UI设计代码截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757836321517-8a6ef2dd-8f0d-47f4-be08-566bd04548aa.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757836906690-d766d589-c40d-4276-9921-653bb33b2e7f.png)

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757836947111-bd446f16-9510-4c46-a3a2-f8695261d92e.png)

评分标准：

1. 使用 ForEach 展示多个工具调用结果
2. 工具项展示时，有提取 name 信息的展示
3. 工具项展示时，有提取 status 信息的展示

---

（3）请将工具调用展示效果截图粘贴到答题卡中

![](https://cdn.nlark.com/yuque/0/2025/png/140914/1757837076581-c7a11069-9bb5-445d-b5c7-d6d16d0f66d0.png)

评分标准：

1. 展示出工具名称
2. 展示出工具状态
